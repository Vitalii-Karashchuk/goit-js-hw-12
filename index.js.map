{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const searchApi = (searchData, page) => {\n        const axiosOption = {\n           params: {\n                key: \"48272938-5d16b358faf0ec3baa9736196\",\n                q: searchData,\n                page: page,\n                per_page: 15,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n           } \n        };\n\n        return axios.get(`https://pixabay.com/api/`, axiosOption);\n\n    };","export const templateCard = (photoCard => {\n    return `\n   <a href=\"${photoCard.largeImageURL}\">\n        <li class=\"gallary-card\">\n            <img class=\"gallary-img\" src=\"${photoCard.webformatURL}\" alt=\"\"> </img>\n            <div class=\"description\">\n                <p>Likes ${photoCard.likes}</p>\n                <p>Views ${photoCard.views}</p>\n                <p>Comments ${photoCard.comments}</p>\n                <p>Downloads ${photoCard.downloads}</p>\n            </div>\n        </li>\n    </a>`;\n});","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {searchApi} from './js/pixabay-api'; \nimport {templateCard} from './js/render-functions';\n\nconst formEl = document.querySelector('.search-form');\nconst listItemsEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst btnLoadMoreEl = document.querySelector('.btn-load-more');\n\n\nlet page = 1;\nlet searchData = '';\n\nloaderEl.style.display = 'none';\n\nconst handleSubmit = async event => {\n    try{\n        event.preventDefault();\n        loaderEl.style.display = 'block';\n    \n        searchData = event.currentTarget.elements.user_query.value.trim();\n    \n        if(searchData === ''){\n            iziToast.show({ \n            title: 'Error',\n            message: 'Поле пошуку порожнє, заповніть поле пошуку!',\n            position: 'center',\n         });\n        \n            return;\n        };\n        \n        page = 1;\n        // btnLoadMoreEl.classList.add('is-hidden');\n     const response = await searchApi(searchData, page);\n                                  console.log(\"🚀 ~ response:\", response)\n                                  \n     if (response.data.total === 0) {\n                iziToast.error({ \n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'center',\n                 }); \n                 \n                 listItemsEl.innerHTML = '';\n\n                 formEl.reset();\n            };                   \n\n                formEl.reset();\n\n                if(response.data.totalHits > 1){\n                    btnLoadMoreEl.classList.remove('is-hidden');\n                    btnLoadMoreEl.addEventListener('click', handleBtnLoadMoreClick);\n                }\n    \n               \n            const cardImg = response.data.hits.map(element => templateCard(element)).join('');\n\n            listItemsEl.innerHTML = cardImg;\n            \n            loaderEl.style.display = 'none';\n\n            \n            let gallery = new SimpleLightbox('.gallery a');\n            gallery.refresh();\n            \n            return;\n         }catch(err){\n             iziToast.error({ \n                title: 'Error',\n                message: 'Error!',\n                position: 'center',\n                });\n        };\n    \n       \n       \n } \n    const handleBtnLoadMoreClick = async event => {\n       \n        try{\n            loaderEl.style.display = 'block';\n            page++;\n           \n            const response = await searchApi(searchData, page);\n                 \n            const cardImg = response.data.hits.map(element => templateCard(element)).join('');\n    \n                listItemsEl.insertAdjacentHTML('beforeend', cardImg);\n\n                loaderEl.style.display = 'none';\n                \n                if(page > response.data.totalHits){\n                    btnLoadMoreEl.classList.add('is-hidden');\n                    btnLoadMoreEl.removeEventListener('click', handleBtnLoadMoreClick);\n                };\n        }catch(err){\n            iziToast.error({ \n                title: 'Error',\n                message: 'Error!',\n                position: 'center',\n                });\n        };\n       \n                    \n                   \n        \n};\n    formEl.addEventListener('submit', handleSubmit);\n    "],"names":["searchApi","searchData","page","axiosOption","axios","templateCard","photoCard","formEl","listItemsEl","loaderEl","btnLoadMoreEl","handleSubmit","event","iziToast","response","handleBtnLoadMoreClick","cardImg","element","SimpleLightbox"],"mappings":"owBAEO,MAAMA,EAAY,CAACC,EAAYC,IAAS,CACvC,MAAMC,EAAc,CACjB,OAAQ,CACH,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CACZ,EAEQ,OAAOE,EAAM,IAAI,2BAA4BD,CAAW,CAE3D,ECjBQE,EAAgBC,GAClB;AAAA,cACGA,EAAU,aAAa;AAAA;AAAA,4CAEOA,EAAU,YAAY;AAAA;AAAA,2BAEvCA,EAAU,KAAK;AAAA,2BACfA,EAAU,KAAK;AAAA,8BACZA,EAAU,QAAQ;AAAA,+BACjBA,EAAU,SAAS;AAAA;AAAA;AAAA,UCI5CC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAgB,SAAS,cAAc,gBAAgB,EAG7D,IAAIR,EAAO,EACPD,EAAa,GAEjBQ,EAAS,MAAM,QAAU,OAEzB,MAAME,EAAe,MAAMC,GAAS,CAChC,GAAG,CAMC,GALAA,EAAM,eAAc,EACpBH,EAAS,MAAM,QAAU,QAEzBR,EAAaW,EAAM,cAAc,SAAS,WAAW,MAAM,OAExDX,IAAe,GAAG,CACjBY,EAAS,KAAK,CACd,MAAO,QACP,QAAS,8CACT,SAAU,QACtB,CAAU,EAEE,MACZ,CAEQX,EAAO,EAEV,MAAMY,EAAW,MAAMd,EAAUC,EAAYC,CAAI,EACpB,QAAQ,IAAI,iBAAkBY,CAAQ,EAE/DA,EAAS,KAAK,QAAU,IACjBD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,QAC9B,CAAkB,EAEDL,EAAY,UAAY,GAExBD,EAAO,MAAK,GAGbA,EAAO,MAAK,EAETO,EAAS,KAAK,UAAY,IACzBJ,EAAc,UAAU,OAAO,WAAW,EAC1CA,EAAc,iBAAiB,QAASK,CAAsB,GAItE,MAAMC,EAAUF,EAAS,KAAK,KAAK,IAAIG,GAAWZ,EAAaY,CAAO,CAAC,EAAE,KAAK,EAAE,EAEhFT,EAAY,UAAYQ,EAExBP,EAAS,MAAM,QAAU,OAGX,IAAIS,EAAe,YAAY,EACrC,QAAO,EAEf,MACF,MAAU,CACPL,EAAS,MAAM,CACZ,MAAO,QACP,QAAS,SACT,SAAU,QAC1B,CAAiB,CAEjB,CAGE,EACQE,EAAyB,MAAMH,GAAS,CAE1C,GAAG,CACCH,EAAS,MAAM,QAAU,QACzBP,IAEA,MAAMY,EAAW,MAAMd,EAAUC,EAAYC,CAAI,EAE3Cc,EAAUF,EAAS,KAAK,KAAK,IAAIG,GAAWZ,EAAaY,CAAO,CAAC,EAAE,KAAK,EAAE,EAE5ET,EAAY,mBAAmB,YAAaQ,CAAO,EAEnDP,EAAS,MAAM,QAAU,OAEtBP,EAAOY,EAAS,KAAK,YACpBJ,EAAc,UAAU,IAAI,WAAW,EACvCA,EAAc,oBAAoB,QAASK,CAAsB,EAE5E,MAAU,CACPF,EAAS,MAAM,CACX,MAAO,QACP,QAAS,SACT,SAAU,QAC1B,CAAiB,CAEjB,CAIA,EACIN,EAAO,iBAAiB,SAAUI,CAAY"}